# Caddy reverse proxy for hawkeye123.dk
# Automatisk HTTPS via Let's Encrypt - ingen manuel konfiguration!

# Supabase - Kong API Gateway (EKSTERN)
supabase.hawkeye123.dk {
    reverse_proxy 192.168.1.92:8888
    # Kong håndterer selv CORS - ingen ekstra headers nødvendige
}

# Remote Desktop Dashboard - redirect til GitHub Pages (EKSTERN)
remote.hawkeye123.dk {
    redir https://stangtennis.github.io/Remote{uri} permanent
}

# Remote Desktop Login - redirect til GitHub Pages login (EKSTERN)
login.hawkeye123.dk {
    redir https://stangtennis.github.io/Remote/login.html permanent
}

# Remote Desktop Downloads - JWT-authenticated via download-proxy (EKSTERN)
downloads.hawkeye123.dk {
    reverse_proxy 192.168.1.92:8099
}

# Auto-update endpoint - åben for agent/controller (EKSTERN)
# Ingen browse, ingen auth - agent/controller skal kunne hente opdateringer
updates.hawkeye123.dk {
    root * /downloads
    file_server

    # CORS headers for auto-update
    header {
        Access-Control-Allow-Origin *
        Access-Control-Allow-Methods "GET, OPTIONS"
    }
}

# Filebrowser - Modern file manager (EKSTERN)
files.hawkeye123.dk {
    reverse_proxy 192.168.1.92:8090 {
        header_up Host {host}
        header_up X-Real-IP {remote_host}
    }
}

# LOKALE SERVICES - kun tilgængelige på 192.168.1.x netværk
# Tilgå via http://192.168.1.92:PORT
# Archon UI - http://192.168.1.92:3737
# Portainer - http://192.168.1.92:9000
